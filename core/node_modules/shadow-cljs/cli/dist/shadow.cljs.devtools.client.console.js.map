{"version":3,"file":"shadow.cljs.devtools.client.console.js","sources":["shadow/cljs/devtools/client/console.cljs"],"mappings":"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","names":["cljs.core/Atom","obj","this__7750__auto__","writer__7751__auto__","opt__7752__auto__","cljs.core/-write","shadow.cljs.devtools.client.console/MapFormatter","shadow.cljs.devtools.client.console/->MapFormatter","cljs.core/PersistentArrayMap","iter__7961__auto__","s__31812","cljs.core/LazySeq","temp__5457__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__7959__auto__","size__7960__auto__","cljs.core/count","b__31814","cljs.core/chunk-buffer","i__31813","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__31811","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","value","s","shadow.cljs.devtools.client.console/clj->jsonml","shadow.cljs.devtools.client.console/keyword-style","cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic","shadow.cljs.devtools.client.console/install-all!","cljs.core/deref","shadow.cljs.devtools.client.console/object-ref","v","arr","item","cljs.core/boolean","cljs.core.get.cljs$core$IFn$_invoke$arity$2","m","key","shadow.cljs.devtools.client.console/remove-all!","cljs.core/type","this","cljs.core/PersistentHashMap","G__31912","shadow.cljs.devtools.client.console/SeqFormatter","cljs.core/sequential?","cljs.core/set?","k","struct","cljs.core/vector?","or__7079__auto__","js/goog.global.devtoolsFormatters","shadow.cljs.devtools.client.console/DerefFormatter","vec__31776","seq__31777","first__31778","cljs.core/next","tag","attrs","children","shadow.cljs.devtools.client.console/SymbolFormatter","shadow.cljs.devtools.client.console/->DerefFormatter","js","cljs.core/name","shadow.cljs.devtools.client.console/map->style","cljs.core/Symbol","all","f","cljs.core/Volatile","cljs.core/seq?","shadow.cljs.devtools.client.console/KeywordFormatter","shadow.cljs.devtools.client.console/->KeywordFormatter","it","cljs.core/array?","shadow.cljs.devtools.client.console/->SeqFormatter","seq__31779","chunk__31780","count__31781","i__31782","c__8010__auto__","cljs.core/chunk-first","child","p1__31917#","cljs.core.remove.cljs$core$IFn$_invoke$arity$2","js/goog.object.get","js/goog.object.set","js/goog.global","cljs.core.map.cljs$core$IFn$_invoke$arity$2","p__31771","vec__31772","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","shadow.cljs.devtools.client.console/push-all","s__31829","e31840","cljs.core/Keyword","cljs.core.array_seq.cljs$core$IFn$_invoke$arity$1","seq__31745","chunk__31746","count__31747","i__31748","cljs.core.sort.cljs$core$IFn$_invoke$arity$1","cljs.core.into.cljs$core$IFn$_invoke$arity$3","cljs.core.map.cljs$core$IFn$_invoke$arity$1","b__31831","i__31830","iter__31828","cljs.core/keys","clojure.string.join.cljs$core$IFn$_invoke$arity$2","shadow.cljs.devtools.client.console/->SymbolFormatter","cljs.core.into_array.cljs$core$IFn$_invoke$arity$1","cljs.core/record?","e"],"sourcesContent":["(ns shadow.cljs.devtools.client.console\n  (:require [clojure.string :as str]))\n\n(defn- push-all [^js arr item]\n  (if (vector? item)\n    (doseq [it item]\n      (.push arr it))\n    (.push arr item)\n    ))\n\n(defn object-ref [obj]\n  (when obj\n    #js [\"object\" #js {:object obj}]))\n\n(defn map->style [m]\n  #js {:style\n       (->> m\n            (map (fn [[k v]] (str (name k) \": \" v \";\")))\n            (str/join \"\")\n            )})\n\n(defn clj->jsonml\n  [struct]\n\n  (cond\n    (nil? struct)\n    nil\n\n    (array? struct)\n    struct\n\n    (vector? struct)\n    (let [[tag attrs & children] struct\n          js #js [(name tag) (map->style attrs)]]\n      (doseq [child children]\n        (push-all js (clj->jsonml child)))\n      js)\n\n    (string? struct)\n    struct\n\n    (number? struct)\n    struct\n\n    (seq? struct)\n    (into [] (map clj->jsonml) struct)\n\n    :else\n    (object-ref struct)\n    ))\n\n(deftype SeqFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (or (sequential? obj) (set? obj))\n      (clj->jsonml [:span {} (str (pr-str (type obj)) \" [count: \" (count obj) \"]\")])\n      ))\n  (hasBody [this obj]\n    (boolean (seq obj)))\n  (body [this s]\n    (clj->jsonml [:ol {:margin 0}\n                  (for [value s]\n                    [:li {} (object-ref value)])])))\n\n(deftype MapFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (or (instance? cljs.core/PersistentHashMap obj)\n              (instance? cljs.core/PersistentArrayMap obj)\n              (record? obj))\n      (clj->jsonml [:span {} (str (pr-str (type obj)) \" [count: \" (count obj) \"]\")])\n      ))\n\n  (hasBody [this obj]\n    (boolean (seq obj)))\n\n  (body [this m]\n    (clj->jsonml\n      [:table {:width \"100%\" :margin-left \"14px\"}\n       (for [key (let [k (keys m)]\n                   (try\n                     (sort k)\n                     (catch :default e\n                       k)))\n             :let [value (get m key)]]\n         [:tr {:vertical-align \"top\"}\n          [:td {} (object-ref key)]\n          [:td {} (object-ref value)]])])))\n\n(def keyword-style {:color \"rgb(136, 19, 145)\"})\n\n(deftype KeywordFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (keyword? obj)\n      (clj->jsonml [:span keyword-style (pr-str obj)])\n      ))\n  (hasBody [this obj]\n    false)\n  (body [this m]\n    nil))\n\n(deftype SymbolFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (symbol? obj)\n      (clj->jsonml [:span keyword-style (pr-str obj)])\n      ))\n  (hasBody [this obj]\n    false)\n  (body [this m]\n    nil))\n\n(deftype DerefFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (or (instance? Atom obj)\n              (instance? Volatile obj))\n      (clj->jsonml [:span keyword-style (str \"@DEREF \" (pr-str (type obj)))])\n      ))\n  (hasBody [this obj]\n    true)\n  (body [this v]\n    (clj->jsonml [:div {:margin-left \"14px\"} (object-ref @v)])))\n\n(defn install-all! []\n  (when-let [^js f js/goog.global.devtoolsFormatters]\n    (doto f\n      (.push (KeywordFormatter.))\n      (.push (MapFormatter.))\n      (.push (SeqFormatter.))\n      (.push (SymbolFormatter.))\n      (.push (DerefFormatter.)))\n\n    #_(js/console.log [1 \"2\" :3 'test {\"hello\" :world} '()])\n    ))\n\n(defn remove-all! []\n  (let [all\n        (->> (or js/goog.global.devtoolsFormatters #js [])\n             (array-seq)\n             (remove #(js/goog.object.get % \"shadow$formatter\"))\n             (into-array))]\n    (js/goog.object.set js/goog.global \"devtoolsFormatters\" all)))\n\n;; in case this is live-reloaded, clean up first\n;; has the side effect of creating window.devtoolsFormatters\n;; do not want to look at the user agent as settings this\n;; doesn't hurt any browser, only chrome with 47+ will use it\n(remove-all!)\n(install-all!)"]}